<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <canvas id="canvas" width="600" height="600" style="background-color:#333"></canvas>
    <script type="text/javascript">
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var middle = canvas.width / 2;
        ctx.strokeStyle="black";
        ctx.fillStyle="orange";

        var lineMax = 80
        var numOPoints = 100

        var x;
        var points = [];
        var heighti
        var heighticalc
        var lineLength = 0
        var chordlength = 200

        var manual = false

        var myTable = document.getElementById('myTable');

        ctx.translate(middle,middle);

        function draw()
        {
        points = [];
        lineLength = 0
        chordlength = 180

        ctx.clearRect(-300,-300,canvas.width,canvas.height)

          for(k=0;k<6;k++){
            points[k] = Math.round(Math.random()*9)
            document.getElementById("myTable").rows[k+1].cells[1].innerHTML = points[k]
          }
          points[5] = Math.round(Math.random()*3)
          document.getElementById("myTable").rows[6].cells[1].innerHTML = points[5]
          points[3] = Math.round(Math.random()*2)
          document.getElementById("myTable").rows[4].cells[1].innerHTML = points[3]

//        points = [7,1,2,1,4,1]

        heighti = points.reduce(myFunc);

        function myFunc(total, num) {
          return total + num;
        }
        heighti = 180/heighti

        for(var i=0;i<6;i++)
        {
          lineLength+=points[i]
          ctx.fillRect(-chordlength,0,chordlength*2,lineLength*heighti)
          document.getElementById("myTable").rows[i+1].cells[2].innerHTML = Math.round(chordlength)
          document.getElementById("myTable").rows[i+1].cells[3].innerHTML = Math.round(points[i]*heighti/2)
          chordlength = (Math.sqrt(Math.pow(180,2)-Math.pow(lineLength*heighti,2)))
        }
        ctx.beginPath();
        ctx.arc(0,0,180,0,Math.PI)
        ctx.stroke();
        ctx.beginPath();
        ctx.setLineDash([5, 3])
        ctx.arc(0,0,160,0,Math.PI)
        ctx.stroke();
        ctx.setLineDash([])
        }
    </script>
    <table id="myTable">
      <thead>
      <tr>
        <td>#</td>
        <td>Number</td>
        <td>radius</td>
        <td>height</td>
      </tr>

      </thead>
      <tr>
        <td>1</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>2</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>3</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>5</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>6</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>

    <button type="button" name="button" onclick="draw()">Draw</button>
  </body>
</html>
